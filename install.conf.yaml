- clean: ["~"]

- shell:
    - description: Installing Homebrew
      command: /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
      stderr: true
      stdout: true
      stdin: true
    - description: Updating Homebrew
      command: brew update
    - description: Installing nvm
      command: curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/master/install.sh | bash
    - description: Installing oh-my-zsh
      command: sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
      stderr: true
      stdout: true
      stdin: true
    - description: Installing Homebrew packages
      command: brew install tmux tmuxinator tmux-fingers pyenv pyenv-virtualenv uv bat fzf fpp gh raycast diff-so-fancy karabiner-elements zsh-autosuggestions zsh-syntax-highlighting scmpuff derailed/k9s/k9s postgresql@16 ripgrep helm helmfile hashicorp/tap/terraform watch procs colima docker docker-compose jj
      stderr: true
      stdout: true
      stdin: true
    - description: Installing Homebrew casks
      command: brew install --cask keepingyouawake cursor rectangle contexts brave-browser iterm2 lulu ghostty ngrok claude-code codex
      stderr: true
      stdout: true
      stdin: true
    - description: Starting Colima and setting Docker context
      command: colima start --runtime docker && docker context use colima
      stderr: true
      stdout: true
      stdin: true
    - description: Enabling Colima auto-start at login
      command: brew services start colima
      stderr: true
      stdout: true
      stdin: true
    - description: Installing helm-diff
      command: helm plugin install https://github.com/databus23/helm-diff
      stderr: true
      stdout: true
      stdin: true
    - description: Setting key repeat speeds
      command: defaults write NSGlobalDomain KeyRepeat -int 2 && defaults write -g InitialKeyRepeat -int 10
    - description: Installing TPM (Tmux Plugin Manager)
      command: git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm 2>/dev/null || (cd ~/.tmux/plugins/tpm && git pull)
      stderr: true
      stdout: true

- link:
    ~/.gitconfig: gitconfig
    ~/.tmux.conf: tmux.conf
    ~/.vimrc: vimrc
    ~/.zprofile: zprofile
    ~/.zshrc: zshrc
    ~/.config/karabiner/karabiner.json:
      path: karabiner.json
      force: true
    ~/.aliases: aliases
    ~/Library/Application\ Support/Cursor/User/keybindings.json:
      path: keybindings.json
      force: true

- shell:
    - description: Installing TPM plugins
      command: tmux set-environment -g TMUX_PLUGIN_MANAGER_PATH ~/.tmux/plugins 2>/dev/null || tmux new-session -d -s _tpm_install; tmux set-environment -g TMUX_PLUGIN_MANAGER_PATH ~/.tmux/plugins && ~/.tmux/plugins/tpm/bin/install_plugins; tmux kill-session -t _tpm_install 2>/dev/null || true
      stderr: true
      stdout: true
